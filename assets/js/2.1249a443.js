(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{820:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return c}));var r=n(873),o=function(e){return Object(r.b)("uc/sys/user/list",e)},i=function(e){return Object(r.b)("uc/sys/permission/getUserPermissionByToken",e)},s=function(e){return Object(r.b)("uc/sysdepart/sysDepart/queryTreeList",e)},u=function(e){return Object(r.b)("uc/sys/user/queryUserByDepId",e)},a=function(e){return Object(r.b)("uc/sys/user/queryUserRoleMap",e)},c=function(){return Object(r.b)("/redirection")}},873:function(e,t,n){"use strict";n(924),n(385),n(805);var r=n(927),o=n(15),i=n(929),s=n.n(i),u=n(947),a="Login_Userinfo",c={state:{sidebar:{opened:!0,withoutAnimation:!1},device:"desktop",theme:"",layout:"",contentWidth:"",fixedHeader:!1,fixSiderbar:!1,autoHideHeader:!1,color:null,weak:!1,multipage:!0},mutations:{SET_SIDEBAR_TYPE:function(e,t){e.sidebar.opened=t,o.a.ls.set("SIDEBAR_TYPE",t)},CLOSE_SIDEBAR:function(e,t){o.a.ls.set("SIDEBAR_TYPE",!0),e.sidebar.opened=!1,e.sidebar.withoutAnimation=t},TOGGLE_DEVICE:function(e,t){e.device=t},TOGGLE_THEME:function(e,t){o.a.ls.set("DEFAULT_THEME",t),e.theme=t},TOGGLE_LAYOUT_MODE:function(e,t){o.a.ls.set("DEFAULT_LAYOUT_MODE",t),e.layout=t},TOGGLE_FIXED_HEADER:function(e,t){o.a.ls.set("DEFAULT_FIXED_HEADER",t),e.fixedHeader=t},TOGGLE_FIXED_SIDERBAR:function(e,t){o.a.ls.set("DEFAULT_FIXED_SIDEMENU",t),e.fixSiderbar=t},TOGGLE_FIXED_HEADER_HIDDEN:function(e,t){o.a.ls.set("DEFAULT_FIXED_HEADER_HIDDEN",t),e.autoHideHeader=t},TOGGLE_CONTENT_WIDTH:function(e,t){o.a.ls.set("DEFAULT_CONTENT_WIDTH_TYPE",t),e.contentWidth=t},TOGGLE_COLOR:function(e,t){o.a.ls.set("DEFAULT_COLOR",t),e.color=t},TOGGLE_WEAK:function(e,t){o.a.ls.set("DEFAULT_COLOR_WEAK",t),e.weak=t},SET_MULTI_PAGE:function(e,t){o.a.ls.set("DEFAULT_MULTI_PAGE",t),e.multipage=t}},actions:{setSidebar:function(e,t){(0,e.commit)("SET_SIDEBAR_TYPE",t)},CloseSidebar:function(e,t){(0,e.commit)("CLOSE_SIDEBAR",t.withoutAnimation)},ToggleDevice:function(e,t){(0,e.commit)("TOGGLE_DEVICE",t)},ToggleTheme:function(e,t){(0,e.commit)("TOGGLE_THEME",t)},ToggleLayoutMode:function(e,t){(0,e.commit)("TOGGLE_LAYOUT_MODE",t)},ToggleFixedHeader:function(e,t){var n=e.commit;t||n("TOGGLE_FIXED_HEADER_HIDDEN",!1),n("TOGGLE_FIXED_HEADER",t)},ToggleFixSiderbar:function(e,t){(0,e.commit)("TOGGLE_FIXED_SIDERBAR",t)},ToggleFixedHeaderHidden:function(e,t){(0,e.commit)("TOGGLE_FIXED_HEADER_HIDDEN",t)},ToggleContentWidth:function(e,t){(0,e.commit)("TOGGLE_CONTENT_WIDTH",t)},ToggleColor:function(e,t){(0,e.commit)("TOGGLE_COLOR",t)},ToggleWeak:function(e,t){(0,e.commit)("TOGGLE_WEAK",t)},ToggleMultipage:function(e,t){(0,e.commit)("SET_MULTI_PAGE",t)}}};var f=n(820),E={state:{token:"",username:"",realname:"",welcome:"",avatar:"",permissionList:[],info:{}},mutations:{SET_TOKEN:function(e,t){e.token=t},SET_NAME:function(e,t){var n=t.username,r=t.realname,o=t.welcome;e.username=n,e.realname=r,e.welcome=o},SET_AVATAR:function(e,t){e.avatar=t},SET_PERMISSIONLIST:function(e,t){e.permissionList=t},SET_INFO:function(e,t){e.info=t}},actions:{Login:function(e,t){var n=e.commit;return new Promise((function(e,r){var o;console.log(n),(o=t,O({url:"/login",method:"post",data:o})).then((function(t){e(t)})).catch((function(e){r(e)}))}))},GetPermissionList:function(e){var t=e.commit;return new Promise((function(e,n){var r;r={},Object(f.c)(r).then((function(r){if(r.result){var o=r.result.menu,i=r.result.auth,s=r.result.allAuth;sessionStorage.setItem("LOGIN_USER_BUTTON_AUTH",JSON.stringify(i)),sessionStorage.setItem("SYS_BUTTON_AUTH",JSON.stringify(s)),o&&o.length>0?t("SET_PERMISSIONLIST",o):n("getPermissionList: permissions must be a non-null array !"),e(r)}})).catch((function(e){n(e)}))}))},Logout:function(e){var t=e.commit;return new Promise((function(e){t("SET_TOKEN",""),t("SET_PERMISSIONLIST",[]),o.a.ls.remove("Access-Token"),o.a.ls.remove("USER_ID"),O({url:"/logout",method:"get"}).then((function(t){e(t)})).catch((function(){e()}))}))}}},m=n(948);var l={state:{routers:m.constantRouterMap,addRouters:[]},mutations:{SET_ROUTERS:function(e,t){e.addRouters=t,e.routers=m.constantRouterMap.concat(t),console.log("-----mutations---SET_ROUTERS----",t)}},actions:{GenerateRoutes:function(e,t){var n=e.commit;return new Promise((function(e){var r,o=t.roles;console.log("-----mutations---data----",t),r=function e(t,n){return t.filter((function(t){return!!function(e,t){if(t.meta&&t.meta.permission){for(var n=0,r=e.length;n<r;n++)if(t.meta.permission.indexOf(e[n])>=0)return!0;return!1}return!0}(n.permissionList,t)&&(t.children&&t.children.length&&(t.children=e(t.children,n)),!0)}))}(m.asyncRouterMap,o),console.log("-----mutations---accessedRouters----",r),n("SET_ROUTERS",r),e()}))},UpdateAppRouter:function(e,t){var n=e.commit;return new Promise((function(e){var r=t.constRoutes;n("SET_ROUTERS",r),e()}))}}},d={device:function(e){return e.app.device},theme:function(e){return e.app.theme},color:function(e){return e.app.color},token:function(e){return e.user.token},avatar:function(e){return e.user.avatar=o.a.ls.get(a)?o.a.ls.get(a).avatar:"",e.user.avatar},username:function(e){return e.user.username},nickname:function(e){return e.user.realname=o.a.ls.get(a)?o.a.ls.get(a).realname:"",e.user.realname},welcome:function(e){return e.user.welcome},permissionList:function(e){return e.user.permissionList},userInfo:function(e){return e.user.info=o.a.ls.get(a)?o.a.ls.get(a):{},e.user.info},addRouters:function(e){return e.permission.addRouters}};o.a.use(u.a);new u.a.Store({modules:{app:c,user:E,permission:l},state:{},mutations:{},actions:{},getters:d});var T=n(169);n(46);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var O=s.a.create({baseURL:"/api",timeout:6e3});O.interceptors.request.use((function(e){return"get"==e.method&&(e.params=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.params)),e}),(function(e){return Promise.reject(e)})),O.interceptors.response.use((function(e){return e.data}),(function(e){if(e.response){var t=e.response.data;switch(console.log("------异常响应------",""),console.log("------异常响应------",e.response.status),e.response.status){case 403:T.a.error({message:"系统提示",description:"您没有"+e.response.config.url+"接口访问权限",duration:4});break;case 500:"";break;case 404:T.a.error({message:"系统提示",description:"很抱歉，资源未找到!",duration:4});break;case 504:T.a.error({message:"系统提示",description:"网络超时"});break;case 401:if(e.response.config.url.indexOf("getUserPermissionByToken")>-1)return;-1===window.location.href.indexOf("/user/login")&&-1===e.response.config.url.indexOf("/api/userInfo")&&(T.a.error({message:"系统提示",description:"未授权，请重新登录",duration:4}),Object(f.f)().then((function(e){e&&setTimeout((function(){e.payload?window.location.href=e.payload:o.a.prototype.router.push({path:"/user/login"})}),1e3)})));break;default:T.a.error({message:"系统提示",description:t.message,duration:4})}}return Promise.reject(e)}));n.d(t,"d",(function(){return _})),n.d(t,"e",(function(){return g})),n.d(t,"c",(function(){return D})),n.d(t,"b",(function(){return L})),n.d(t,"a",(function(){return S}));function _(e,t){return O({url:e,method:"post",data:t})}function g(e,t){return O({url:e,method:"put",data:t})}function D(e,t){return O({url:e,method:"patch",data:t})}function L(e,t){return O({url:e,method:"get",params:t})}function S(e,t){return O({url:e,method:"delete",params:t})}},948:function(e,t){}}]);